#
# Recommended minimum Access Permission configuration:
#
# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost
# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on "localhost" is a local user
#http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
auth_param basic program /usr/lib64/squid/basic_ldap_auth -R -b "dc=example,dc=com" -D "cn=squid,ou=squid,dc=example,dc=com" -w "Zemun2013" -f sAMAccountName=%s -h 192.168.122.100
auth_param basic children 5
auth_param basic realm Please enter user name to access the internet
auth_param basic credentialsttl 1 hour
external_acl_type ldap_group %LOGIN /usr/lib64/squid/ext_ldap_group_acl -R -b "dc=example,dc=com" -D "cn=squid,ou=squid,dc=example,dc=com" -w "Zemun2013" -f "(&(objectclass=person) (sAMAccountname=%u)(memberof=cn=%g,ou=squid,dc=example,dc=com))" -h 192.168.122.100

acl restricted external ldap_group restricted
acl nolimit external ldap_group nolimit
acl allowed_time time T 00:00-12:00
acl blockfiles urlpath_regex -i \.[Ee][Xx][Ee]$

acl rule2 url_regex -i www.ign.com
reply_body_max_size 30 MB allowed_time

http_access allow test_group !rule2 allowed_time !blockfiles
http_access allow nolimit

# And finally deny all other access to this proxy
http_access deny all

# Squid normally listens to port 3128
http_port 3128

# Uncomment and adjust the following to add a disk cache directory.
#cache_dir ufs /var/spool/squid 100 16 256

# Leave coredumps in the first cache dir
coredump_dir /var/spool/squid

#
# Add any of your own refresh_pattern entries above these.
#
refresh_pattern ^ftp: 1440 20% 10080
refresh_pattern ^gopher: 1440 0% 1440
refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
refresh_pattern .



---

#
# Recommended minimum Access Permission configuration:
#
# Deny requests to certain unsafe ports
http_access deny !Safe_ports

# Deny CONNECT to other than secure SSL ports
http_access deny CONNECT !SSL_ports

# Only allow cachemgr access from localhost
http_access allow localhost
# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on "localhost" is a local user
#http_access deny to_localhost

#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#

# Example rule allowing access from your local networks.
# Adapt localnet in the ACL section to list your (internal) IP networks
# from where browsing should be allowed
auth_param basic program /usr/lib64/squid/basic_ldap_auth -R -b "dc=example,dc=com" -D "cn=squid,ou=squid,dc=example,dc=com" -w "Zemun2013" -f sAMAccountName=%s -h 192.168.122.100
auth_param basic children 5
auth_param basic realm Please enter user name to access the internet
auth_param basic credentialsttl 1 hour
external_acl_type ldap_group %LOGIN /usr/lib64/squid/ext_ldap_group_acl -R -b "dc=example,dc=com" -D "cn=squid,ou=squid,dc=example,dc=com" -w "Zemun2013" -f "(&(objectclass=person) (sAMAccountname=%u)(memberof=cn=%g,ou=squid,dc=example,dc=com))" -h 192.168.122.100

acl restricted external ldap_group restricted
acl nolimit external ldap_group nolimit
acl allowed_time time T 00:00-12:00
acl blockfiles urlpath_regex -i \.[Ee][Xx][Ee]$

acl rule2 url_regex -i www.ign.com
reply_body_max_size 30 MB allowed_time

http_access allow test_group !rule2 allowed_time !blockfiles
http_access allow nolimit

# And finally deny all other access to this proxy
http_access deny all

# Squid normally listens to port 3128
http_port 3128
